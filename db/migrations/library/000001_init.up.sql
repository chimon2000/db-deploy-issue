create table public.books (
    id bigint generated by default as identity,
    title text not null,
    author text not null,
    publication_date date null,
    genre text null,
    description text null,
    copies smallint null,
    constraint books_pkey primary key (id)
);
create table public.patrons (
    id uuid not null default gen_random_uuid (),
    name text not null,
    address text null,
    email text not null,
    phone_number text null,
    external_id text not null,
    constraint patrons_pkey primary key (id),
    constraint patrons_external_id_key unique (external_id)
);
create table public.borrowed_books (
    book_id integer not null,
    patron_id uuid not null,
    borrow_date date not null,
    return_date date null,
    is_active boolean not null,
    constraint borrowed_books_pkey primary key (patron_id, book_id),
    constraint borrowed_books_book_id_fkey foreign key (book_id) references books (id),
    constraint borrowed_books_patron_id_fkey foreign key (patron_id) references patrons (id)
);